<!doctype html>
<html>
<!-- This file is automatically generated.  Please edit the templates (e.g., pages/*.hbs, partial/*.hbs) instead
     of editing the .html file directly. -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>JS/CC &mdash; An Example Parser</title>
    <link id="main-stylesheet" rel="stylesheet" href="../../stylesheets/main-light.css"/>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed navbar-toggle collapsed" type="button" data-toggle="collapse"
              data-target="#navbar-collapse-1" aria-expanded="false"><span
        class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span
        class="icon-bar"></span></button>
      <a href="../../index.html" class="navbar-brand">JS/CC</a>
    </div>
    <div class="collapse navbar-collapse" id="navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="../../getting-started.html">Getting Started</a></li>
        <li><a href="../introducing/welcome.html">Documentation</a></li>
        <li><a href="../../demo.html">Demo</a></li>
        <li><a href="../../licenses.html">Licenses</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#" id="toggle-theme">Toggle Theme</a></li>
        <li><a href="../../contact.html">Contact</a></li>
        <li><a href="https://github.com/abrobston/jscc">GitHub</a></li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container-fluid">
        <div class="row">
            <div class="documentation-table-of-contents">
              <ul class="nav nav-pills nav-stacked">
                    <li class="dropdown" role="presentation">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Introducing JS/CC <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                              <li><a href="../introducing/welcome.html">Welcome to JS/CC</a></li>
                              <li><a href="../introducing/intention.html">The intention behind JS/CC</a></li>
                              <li><a href="../introducing/future.html">Future plans</a></li>
                              <li><a href="../introducing/words.html">Some words by the author</a></li>
                        </ul>
                    </li>
                    <li class="dropdown" role="presentation">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">A Quick Start Example <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                              <li><a href="building.html">Building JS/CC for your platform</a></li>
                              <li><a href="installation.html">Installation and Start-Up</a></li>
                              <li><a href="options.html">Compiler options</a></li>
                              <li><a href="example.html">An example parser</a></li>
                              <li><a href="compiling.html">Compiling the example</a></li>
                        </ul>
                    </li>
                    <li class="dropdown" role="presentation">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">The Grammar Definition Language <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                              <li><a href="../grammar/general.html">General</a></li>
                              <li><a href="../grammar/terminal.html">The Terminal Declaration Part</a></li>
                              <li><a href="../grammar/regex.html">Regular Expressions</a></li>
                              <li><a href="../grammar/grammar.html">The Grammar Definition Part</a></li>
                        </ul>
                    </li>
                    <li class="dropdown" role="presentation">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Implementing a Scripting Language <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                              <li><a href="../implementing/idea.html">The idea</a></li>
                              <li><a href="../implementing/defining.html">Defining the grammar</a></li>
                              <li><a href="../implementing/executing.html">Executing the script</a></li>
                              <li><a href="../implementing/complete.html">The complete program</a></li>
                        </ul>
                    </li>
              </ul>            </div>
            <div class="documentation-main">
              <div class="row">
                  <nav>
                        <ul class="pager">
                              <li class="previous"><a href="options.html"><span
                                      aria-hidden="true">&larr;</span> Compiler options</a></li>
                              <li class="next"><a href="compiling.html">Compiling the example <span aria-hidden="true">&rarr;</span></a>
                              </li>
                        </ul>
                  </nav>
              </div>              <h1>An Example Parser</h1>
              <p>In parser generators like yacc, a simple parser for mathematical expressions is the most widely used example to
                  become familiar with the syntax and usage, so we do this even here. The parser definition language itself is
                  described below in a more detailed way.</p>
              <p>Store the following grammar definition into a text file of your choice. For parser source files, the
                  <code>.par</code> file extension could be used, so the file is named <code>calc.par</code> in such case.</p>
              <pre>
              <code class="language-jscc">
              
              /~  Expression calculator written in JS/CC ~/
              
              /~  Tokens to be ignored (e.g. whitespace, comments) ~/
              !   ' |\t'
                  ;
              
              /~  Grammar tokens            ~/
                  '\+'
                  '\-'
                  '\*'
                  '/'
                  '\('
                  '\)'
                  '[0-9]+'      INT  [* %match = parseInt( %match );  *]
                  '[0-9]+\.[0-9]*|[0-9]*\.[0-9]+'  FLOAT  [* %match = parseFloat( %match );  *]
                  ;
              ##
              
              /~     The non-terminal "p" is the entry symbol, because it is the first one!    ~/
              program:  expr    [* print( %1 );  *]
                     ;
              
              /~     Don't confuse with the tokens: Here, we use the unescaped values because these
                     are not interpreted as regular expressions at this position!    ~/
              expr:  expr '+' term  [* %% = %1 + %3; *]
                     | expr '-' term  [* %% = %1 - %3; *]
                     | term    /~ Default semantic action fits here! ~/
                     ;
              
              term:  term '*' factor  [* %% = %1 * %3; *]
                     | term '/' factor  [* %% = %1 / %3; *]
                     | factor    /~ Default semantic action fits here! ~/
                     ;
              
              factor: '(' expr ')'  [* %% = %2; *]
                      | INT    /~ Default semantic action fits here! ~/
                      | FLOAT    /~ Default semantic action fits here! ~/
                      ;
              
              /~      This is the parser entry point; Because this entry point could be very individual,
                      the compiler programmer has to decide which way he wants to read the source, parse
                      it and report the errors, if there are any.        ~/
              [*
              var error_offsets = new Array();
              var error_lookaheads = new Array();
              var error_count = 0;
              
              var str = new String( arguments[0] );
              
              if( ( error_count = __parse( str,
                      error_offsets, error_lookaheads ) ) > 0 )
              {
                for( i = 0; i < error_count; i++ )
                  print( "Parse error near \""
                    + str.substr( error_offsets[i] ) +
                      "\", expecting \"" +
                        error_lookaheads[i].join() +
                          "\"" );
              }
              *]
              
              </code>
              </pre>
              <div class="row">
                  <nav>
                        <ul class="pager">
                              <li class="previous"><a href="options.html"><span
                                      aria-hidden="true">&larr;</span> Compiler options</a></li>
                              <li class="next"><a href="compiling.html">Compiling the example <span aria-hidden="true">&rarr;</span></a>
                              </li>
                        </ul>
                  </nav>
              </div>            </div>
        </div>
        <div class="row">
            <div class="col-xs-12">
              <footer>
                  <p>The JS/CC project is maintained by <a href="https://github.com/abrobston">Andrew Brobston</a>. Documentation is
                      by Jan Max Meyer and edited by Andrew Brobston. Contributions to this website are welcome. Please see the <a
                              href="https://github.com/abrobston/jscc/blob/gh-pages/README.md">README</a> for further information.</p>
                  <p><a href="../../licenses.html">Licenses</a> | <a href="../../contact.html">Contact</a>
                  </p>
                  <p>Hosted on GitHub Pages</p>
              </footer>
            </div>
        </div>
    </div>
    <script src="../../javascripts/main-built.js"></script>
</body>
</html>
